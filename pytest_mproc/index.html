
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Welcome to AndroidTestOrchestrator’s documentation! &#8212; AndroidTestOrchestrator  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Welcome to AndroidTestOrchestrator’s Developer Guide!" href="developer_guide.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="welcome-to-androidtestorchestrator-s-documentation">
<h1><a class="toc-backref" href="#id2">Welcome to AndroidTestOrchestrator’s documentation!</a><a class="headerlink" href="#welcome-to-androidtestorchestrator-s-documentation" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#welcome-to-androidtestorchestrator-s-documentation" id="id2">Welcome to AndroidTestOrchestrator’s documentation!</a></p></li>
<li><p><a class="reference internal" href="#introduction" id="id3">Introduction</a></p></li>
<li><p><a class="reference internal" href="#executing-a-test-plan" id="id4">Executing a Test Plan</a></p></li>
<li><p><a class="reference internal" href="#interacting-with-devices-directly" id="id5">Interacting with Devices Directly</a></p>
<ul>
<li><p><a class="reference internal" href="#raw-device-instractions" id="id6">Raw device instractions</a></p></li>
<li><p><a class="reference internal" href="#installing-and-running-applications" id="id7">Installing and running applications</a></p></li>
<li><p><a class="reference internal" href="#module-androidtestorchestrator.devicestorage" id="id8">Pushing and Pulling Files to/from Device Storage</a></p></li>
<li><p><a class="reference internal" href="#module-androidtestorchestrator.devicelog" id="id9">Accessing logcat</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#indices-and-tables" id="id10">Indices and tables</a></p></li>
</ul>
</div>
<p>If you are looking for the Developer’s Guide, follow these links:</p>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Developer's Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html">Welcome to AndroidTestOrchestrator’s Developer Guide!</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html#introduction">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html#test-execution-on-android">Test Execution on Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html#distributing-and-parallelizing-testing">Distributing and Parallelizing Testing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="developer_guide.html#python-and-asyncio">Python and Asyncio</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_guide.html#getting-to-the-details">Getting to the Details</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html#the-architecture">The Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="developer_guide.html#the-foundation">The Foundation</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="introduction">
<span id="id1"></span><h1><a class="toc-backref" href="#id3">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>AndroidTestOrchestrator provides an API for executing a test plan (a collection of test suites) against a set of
Android devices.  Although these devices can be emulators, the main use for AndroidTestOrchestrator is for real
devices.</p>
<p>Other features include:
#. Capture of full logcat during execution of the test plan
#. Ability to monitor specific tags fom logcat during execution
#. Support for emulator bring up
#. Support for running in parallel on multiple devices/emulators</p>
<p>Developers:  see the <a class="reference internal" href="developer_guide.html#developer-guide"><span class="std std-ref">Welcome to AndroidTestOrchestrator’s Developer Guide!</span></a>;</p>
</div>
<div class="section" id="executing-a-test-plan">
<span id="main-use-case"></span><h1><a class="toc-backref" href="#id4">Executing a Test Plan</a><a class="headerlink" href="#executing-a-test-plan" title="Permalink to this headline">¶</a></h1>
<p>A test plan is nothing more than an Iterator over a collection of test suites using the AndroidTestOrchestrator class
in the <cite>androidtestorchestrator</cite> module</p>
<p>A plan is executed via the top-level class:</p>
<span class="target" id="module-androidtestorchestrator"></span></div>
<div class="section" id="interacting-with-devices-directly">
<span id="device-interactions"></span><h1><a class="toc-backref" href="#id5">Interacting with Devices Directly</a><a class="headerlink" href="#interacting-with-devices-directly" title="Permalink to this headline">¶</a></h1>
<p>An API is also provided to interact directly with devices if needed.  In basic scenarios, this is generally not needed.
However, for more advanced use cases, this may be useful.</p>
<div class="section" id="raw-device-instractions">
<h2><a class="toc-backref" href="#id6">Raw device instractions</a><a class="headerlink" href="#raw-device-instractions" title="Permalink to this headline">¶</a></h2>
<p>From the <cite>androidorchestrator.application</cite> device:</p>
<span class="target" id="module-androidtestorchestrator.device"></span><p>This package contains the core elements for device interaction: to query aspects of the device, c
hange or get settings and properties, and core API for raw execution of commands on the device (via adb), etc.</p>
<dl class="py class">
<dt id="androidtestorchestrator.device.Device">
<em class="property">class </em><code class="sig-name descname">Device</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">device_id</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">adb_path</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#androidtestorchestrator.device.Device" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for interacting with a device via Google’s adb command. This is intended to be a direct bridge to the same
functionality as adb, with minimized embellishments, but providing a clean Python API.</p>
<dl class="py exception">
<dt id="androidtestorchestrator.device.Device.CommandExecutionFailureException">
<em class="property">exception </em><code class="sig-name descname">CommandExecutionFailureException</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">return_code</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">msg</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#androidtestorchestrator.device.Device.CommandExecutionFailureException" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py exception">
<dt id="androidtestorchestrator.device.Device.InsufficientStorageError">
<em class="property">exception </em><code class="sig-name descname">InsufficientStorageError</code><a class="headerlink" href="#androidtestorchestrator.device.Device.InsufficientStorageError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised on insufficient storage on device (e.g. in install)</p>
</dd></dl>

<dl class="py class">
<dt id="androidtestorchestrator.device.Device.Process">
<em class="property">class </em><code class="sig-name descname">Process</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">process</span><span class="p">:</span> <span class="n">asyncio.subprocess.Process</span></em><span class="sig-paren">)</span><a class="headerlink" href="#androidtestorchestrator.device.Device.Process" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a basic interface to an underlying asyncio.Subprocess, providing access to an async generator
for iterating over lines of output asynchronously</p>
<dl class="py method">
<dt id="androidtestorchestrator.device.Device.Process.output">
<code class="sig-name descname">output</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unresponsive_timeout</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; AsyncIterator<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.device.Device.Process.output" title="Permalink to this definition">¶</a></dt>
<dd><p>Async iterator over lines of output from process</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>unresponsive_timeout</strong> – raise TimeoutException if not None and time to receive next line exceeds
this given time span</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.Process.stop">
<em class="property">async </em><code class="sig-name descname">stop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">force</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.device.Device.Process.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Signal process to terminate, and wait for process to end</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>force</strong> – whether to kill (harsh) or simply terminate</p></li>
<li><p><strong>timeout</strong> – raise TimeoutException if process fails to truly terminate in timeout seconds</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.Process.wait">
<em class="property">async </em><code class="sig-name descname">wait</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.device.Device.Process.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for process to end</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> – raise TimeoutException if waiting beyond this many seconds</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="androidtestorchestrator.device.Device.State">
<em class="property">class </em><code class="sig-name descname">State</code><a class="headerlink" href="#androidtestorchestrator.device.Device.State" title="Permalink to this definition">¶</a></dt>
<dd><p>An enumeration of possible device states</p>
<dl class="py attribute">
<dt id="androidtestorchestrator.device.Device.State.OFFLINE">
<code class="sig-name descname">OFFLINE</code><em class="property">: str</em><em class="property"> = 'offline'</em><a class="headerlink" href="#androidtestorchestrator.device.Device.State.OFFLINE" title="Permalink to this definition">¶</a></dt>
<dd><p>Device is online and active</p>
</dd></dl>

<dl class="py attribute">
<dt id="androidtestorchestrator.device.Device.State.ONLINE">
<code class="sig-name descname">ONLINE</code><em class="property">: str</em><em class="property"> = 'device'</em><a class="headerlink" href="#androidtestorchestrator.device.Device.State.ONLINE" title="Permalink to this definition">¶</a></dt>
<dd><p>State of device is unknown</p>
</dd></dl>

<dl class="py attribute">
<dt id="androidtestorchestrator.device.Device.State.UNKNOWN">
<code class="sig-name descname">UNKNOWN</code><em class="property">: str</em><em class="property"> = 'unknown'</em><a class="headerlink" href="#androidtestorchestrator.device.Device.State.UNKNOWN" title="Permalink to this definition">¶</a></dt>
<dd><p>Device is not detected</p>
</dd></dl>

</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.api_level">
<em class="property">property </em><code class="sig-name descname">api_level</code><a class="headerlink" href="#androidtestorchestrator.device.Device.api_level" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>api level of device</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.brand">
<em class="property">property </em><code class="sig-name descname">brand</code><a class="headerlink" href="#androidtestorchestrator.device.Device.brand" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the brand of the device as provided in its system properties, or “UNKNOWN” if indeterminable</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.check_network_connection">
<em class="property">async </em><code class="sig-name descname">check_network_connection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">domain</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">count</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">3</span></em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#androidtestorchestrator.device.Device.check_network_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Check network connection to domain</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>domain</strong> – domain to ping</p></li>
<li><p><strong>count</strong> – how many times to ping domain</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 on success, number of failed packets otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.device_id">
<em class="property">property </em><code class="sig-name descname">device_id</code><a class="headerlink" href="#androidtestorchestrator.device.Device.device_id" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the unique serial id of this device</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.device_name">
<em class="property">property </em><code class="sig-name descname">device_name</code><a class="headerlink" href="#androidtestorchestrator.device.Device.device_name" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a name for this device based on model and manufacturer</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.device_server_datetime_offset">
<em class="property">property </em><code class="sig-name descname">device_server_datetime_offset</code><a class="headerlink" href="#androidtestorchestrator.device.Device.device_server_datetime_offset" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Returns a datetime.timedelta object that represents the difference between the server/host datetime
and the datetime of the Android device</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.execute_remote_cmd">
<code class="sig-name descname">execute_remote_cmd</code><span class="sig-paren">(</span><em class="sig-param">*args: str, timeout: Optional[float] = None, capture_stdout: bool = True, stdout_redirect: Union[None, int, IO[AnyStr]] = -3, fail_on_presence_of_stderr: bool = False, fail_on_error_code: Callable[[int], bool] = &lt;function Device.&lt;lambda&gt;&gt;</em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.device.Device.execute_remote_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a command on this device (via adb)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – args to be executed (via adb command)</p></li>
<li><p><strong>timeout</strong> – raise asyncio.TimeoutError if command fails to execute in specified time (in seconds)</p></li>
<li><p><strong>capture_stdout</strong> – whether to capture and return stdout output (otherwise return None)</p></li>
<li><p><strong>stdout_redirect</strong> – where to redirect stdout, defaults to subprocess.DEVNULL</p></li>
<li><p><strong>fail_on_presence_of_stderr</strong> – Some commands return code 0 and still fail, so must check stderr
(NOTE however that some commands like monkey return 0 and use stderr as though it was stdout :-( )</p></li>
<li><p><strong>fail_on_error_code</strong> – optional function that takes an error code and returns true if it represents an
error, False otherwise</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None if no stdout output requested, otherwise a string containing the stdout output of the command</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>CommandExecutionFailureException: if command fails to execute on remote device</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>asyncio.TimeoutError if command fails to execute in time</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.execute_remote_cmd_background">
<code class="sig-name descname">execute_remote_cmd_background</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">stdout</span><span class="p">:</span> <span class="n">Union[None, int, IO[AnyStr]]</span> <span class="o">=</span> <span class="default_value">- 1</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span> &#x2192; subprocess.Popen<a class="headerlink" href="#androidtestorchestrator.device.Device.execute_remote_cmd_background" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the given command args in the background.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – command + list of args to be executed</p></li>
<li><p><strong>stdout</strong> – an optional file-like objection to which stdout is to be redirected (piped).
defaults to subprocess.PIPE. If None, stdout is redirected to /dev/null</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>subprocess.Open</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.external_storage_location">
<em class="property">property </em><code class="sig-name descname">external_storage_location</code><a class="headerlink" href="#androidtestorchestrator.device.Device.external_storage_location" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>location on remote device of external storage</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.foreground_activity">
<code class="sig-name descname">foreground_activity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ignore_silent_apps</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.device.Device.foreground_activity" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ignore_silent_apps</strong> – whether or not to ignore silent-running apps (ignoring those if they are in the
stack. They show up as the foreground activity, even if the normal activity we care about is behind it and
running as expected).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>package name of current foreground activity</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.formulate_adb_cmd">
<code class="sig-name descname">formulate_adb_cmd</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Tuple[str, …]<a class="headerlink" href="#androidtestorchestrator.device.Device.formulate_adb_cmd" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> – args to the adb command</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the adb command that executes the given arguments on the remote device from this host</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.get_device_datetime">
<code class="sig-name descname">get_device_datetime</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; datetime.datetime<a class="headerlink" href="#androidtestorchestrator.device.Device.get_device_datetime" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Best estimate of device’s current datetime. If device’s original datetime could not be computed during
init phase, the server’s datetime is returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.get_device_properties">
<code class="sig-name descname">get_device_properties</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Dict<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.device.Device.get_device_properties" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>full dict of properties</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.get_device_setting">
<code class="sig-name descname">get_device_setting</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">namespace</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.device.Device.get_device_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a device setting</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> – android setting namespace</p></li>
<li><p><strong>key</strong> – which setting to get</p></li>
<li><p><strong>verbose</strong> – if False, silence any logging</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>value of the requested setting as string, or None if setting could not be found</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.get_locale">
<code class="sig-name descname">get_locale</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.device.Device.get_locale" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>device’s current locale setting, or None if indeterminant</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.get_state">
<code class="sig-name descname">get_state</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#androidtestorchestrator.device.Device.State" title="androidtestorchestrator.device.Device.State">androidtestorchestrator.device.Device.State</a><a class="headerlink" href="#androidtestorchestrator.device.Device.get_state" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>current state of emulaor (“device”, “offline”, “non-existent”, …)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.get_system_property">
<code class="sig-name descname">get_system_property</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.device.Device.get_system_property" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – the key of the property to be retrieved</p></li>
<li><p><strong>verbose</strong> – whether to print error messages on command execution problems or not</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the property from the device associated with the given key, or None if no such property exists</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.get_version">
<code class="sig-name descname">get_version</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">package</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.device.Device.get_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Get version of given package</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>package</strong> – package of inquiry</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>version of given package or None if no such package</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.go_home">
<code class="sig-name descname">go_home</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.device.Device.go_home" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to hitting home button to go to home screen</p>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.home_screen_active">
<em class="property">property </em><code class="sig-name descname">home_screen_active</code><a class="headerlink" href="#androidtestorchestrator.device.Device.home_screen_active" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if the home screen is currently in the foreground. Note that system pop-ups will result in this</p>
</dd>
</dl>
<p>function returning False.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>Exception</strong> – if unable to make determination</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.input">
<code class="sig-name descname">input</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subject</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">source</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.device.Device.input" title="Permalink to this definition">¶</a></dt>
<dd><p>Send event subject through given source</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subject</strong> – event to send</p></li>
<li><p><strong>source</strong> – source of event, or None to default to “keyevent”</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.install">
<em class="property">async </em><code class="sig-name descname">install</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">apk_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">as_upgrade</span><span class="p">:</span> <span class="n">bool</span></em>, <em class="sig-param"><span class="n">conditions</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">on_full_install</span><span class="p">:</span> <span class="n">Optional[Callable[[], None]]</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">screenshot_dir</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.device.Device.install" title="Permalink to this definition">¶</a></dt>
<dd><p>Install given apk asynchronously, monitoring output for messages containing any of the given conditions,
executing a callback if given when any such condition is met.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>apk_path</strong> – bundle to install</p></li>
<li><p><strong>as_upgrade</strong> – whether as upgrade or not</p></li>
<li><p><strong>conditions</strong> – list of strings to look for in stdout as a trigger for callback. Some devices are
non-standard and will provide a pop-up request explicit user permission for install once the apk is fully
uploaded and prepared. This param defaults to [“100%”, “pkg:”, “Success”] as indication that bundle was
fully prepared (pre-pop-up).</p></li>
<li><p><strong>on_full_install</strong> – if not None the callback to be called</p></li>
<li><p><strong>screenshot_dir</strong> – if not None, where to capture a screenshot on failure; if None, no verification of
install will be performed</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#androidtestorchestrator.device.Device.InsufficientStorageError" title="androidtestorchestrator.device.Device.InsufficientStorageError"><strong>Device.InsufficientStorageError</strong></a> – if there is not enough space on device</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.install_synchronous">
<code class="sig-name descname">install_synchronous</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">apk_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">as_upgrade</span><span class="p">:</span> <span class="n">bool</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.device.Device.install_synchronous" title="Permalink to this definition">¶</a></dt>
<dd><p>install the given bundle, blocking until complete
:param apk_path: local path to the apk to be installed
:param as_upgrade: install as upgrade or not</p>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.is_screen_on">
<code class="sig-name descname">is_screen_on</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#androidtestorchestrator.device.Device.is_screen_on" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>whether device’s screen is on</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.list">
<code class="sig-name descname">list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kind</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.device.Device.list" title="Permalink to this definition">¶</a></dt>
<dd><p>List available items of a given kind on the device
:param kind: instrumentation or package</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of available items of given kind on the device</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.list_installed_packages">
<code class="sig-name descname">list_installed_packages</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.device.Device.list_installed_packages" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of all packages installed on device</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.list_instrumentation">
<code class="sig-name descname">list_instrumentation</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.device.Device.list_instrumentation" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of instrumentations for a (test) app</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.manufacturer">
<em class="property">property </em><code class="sig-name descname">manufacturer</code><a class="headerlink" href="#androidtestorchestrator.device.Device.manufacturer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the manufacturer of this device, or “UNKNOWN” if indeterminable</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.model">
<em class="property">property </em><code class="sig-name descname">model</code><a class="headerlink" href="#androidtestorchestrator.device.Device.model" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the model of this device, or “UNKNOWN” if indeterminable</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.monitor_remote_cmd">
<em class="property">async </em><code class="sig-name descname">monitor_remote_cmd</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">loop</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>asyncio.events.AbstractEventLoop<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; AbstractAsyncContextManager<span class="p">[</span>Any<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.device.Device.monitor_remote_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Coroutine for executing a command on this remote device asynchronously, allowing the client to iterate over
lines of output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – command to execute</p></li>
<li><p><strong>loop</strong> – event loop to asynchronously run under, or None for default event loop</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AsyncGenerator iterating over lines of output from command</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">device</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span><span class="s2">&quot;some_id&quot;</span><span class="p">,</span> <span class="s2">&quot;/path/to/adb&quot;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">async</span> <span class="k">with</span> <span class="k">await</span> <span class="n">device</span><span class="o">.</span><span class="n">monitor_remote_cmd</span><span class="p">(</span><span class="s2">&quot;some_cmd&quot;</span><span class="p">,</span> <span class="s2">&quot;with&quot;</span><span class="p">,</span> <span class="s2">&quot;args&quot;</span><span class="p">,</span> <span class="n">unresponsive_timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="k">as</span> <span class="n">proc</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">async</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">proc</span><span class="o">.</span><span class="n">output</span><span class="p">():</span>
<span class="gp">... </span>        <span class="c1"># process(line)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.port_forward">
<code class="sig-name descname">port_forward</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">local_port</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">device_port</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.device.Device.port_forward" title="Permalink to this definition">¶</a></dt>
<dd><p>forward traffic from local port to remote device port</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_port</strong> – port to forward from</p></li>
<li><p><strong>device_port</strong> – port to forward to</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.remove_port_forward">
<code class="sig-name descname">remove_port_forward</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">port</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.device.Device.remove_port_forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove reverse port forwarding</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>port</strong> – port to remove or None to remove all reverse forwarded ports</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.remove_reverse_port_forward">
<code class="sig-name descname">remove_reverse_port_forward</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">port</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.device.Device.remove_reverse_port_forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove reverse port forwarding</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>port</strong> – port to remove or None to remove all reverse forwarded ports</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.reverse_port_forward">
<code class="sig-name descname">reverse_port_forward</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">device_port</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">local_port</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.device.Device.reverse_port_forward" title="Permalink to this definition">¶</a></dt>
<dd><p>reverse forward traffic on remote port to local port</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device_port</strong> – remote device port to forward</p></li>
<li><p><strong>local_port</strong> – port to forward to</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.set_default_adb_timeout">
<em class="property">classmethod </em><code class="sig-name descname">set_default_adb_timeout</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.device.Device.set_default_adb_timeout" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> – timeout in seconds</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.set_default_long_adb_timeout">
<em class="property">classmethod </em><code class="sig-name descname">set_default_long_adb_timeout</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.device.Device.set_default_long_adb_timeout" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> – timeout in seconds</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.set_device_setting">
<code class="sig-name descname">set_device_setting</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">namespace</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">value</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.device.Device.set_device_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Change a setting of the device</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace</strong> – system, etc. – and android namespace for settings</p></li>
<li><p><strong>key</strong> – which setting</p></li>
<li><p><strong>value</strong> – new value for setting</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>previous value setting, in case client wishes to restore setting at some point</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.set_system_property">
<code class="sig-name descname">set_system_property</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">value</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.device.Device.set_system_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a system property on this device</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – system property key to be set</p></li>
<li><p><strong>value</strong> – value to set to</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>previous value, in case client wishes to restore at some point</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.take_screenshot">
<code class="sig-name descname">take_screenshot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">local_screenshot_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.device.Device.take_screenshot" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_screenshot_path</strong> – path to store screenshot</p></li>
<li><p><strong>timeout</strong> – timeout after this many seconds of trying to take screenshot, or None to use default timeout</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>TimeoutException if screenshot not captured within timeout (or default timeout) seconds</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>FileExistsError if path to capture screenshot already exists (will not overwrite)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.device.Device.toggle_screen_on">
<code class="sig-name descname">toggle_screen_on</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.device.Device.toggle_screen_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Toggle device’s screen on/off</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="installing-and-running-applications">
<h2><a class="toc-backref" href="#id7">Installing and running applications</a><a class="headerlink" href="#installing-and-running-applications" title="Permalink to this headline">¶</a></h2>
<p>From the <cite>androidorchestrator.application</cite> module:</p>
<span class="target" id="module-androidtestorchestrator.application"></span><p>This package contains classes associated with an application installed on the device.
An application is distinguished from a bundle (an apk).  A bundle is a package that only after installed
creates an application on the target device.  Thus, an application only makes sense in the context of the
device on which it can be launched.</p>
<p>The base class for applications is <em>Application</em> with <em>ServiceApplication</em> and <em>TestApplication</em> inheriting
from that class to provide additional APIs specific to service application and (Espresso) test applications.</p>
<dl class="py class">
<dt id="androidtestorchestrator.application.Application">
<em class="property">class </em><code class="sig-name descname">Application</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">device</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#androidtestorchestrator.device.Device" title="androidtestorchestrator.device.Device">androidtestorchestrator.device.Device</a></span></em>, <em class="sig-param"><span class="n">manifest</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>apk_bitminer.parsing.AXMLParser<span class="p">, </span>Dict<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#androidtestorchestrator.application.Application" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines an application installed on a remotely USB-connected device. Provides an interface for stopping,
starting an application, and such. It is recommended to create instances via the class-method <cite>from_apk</cite> or
<cite>from_apk_async</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>manifest</strong> – AXMLParser instance representing manifest from an apk, or Dict of key/value string pairs of
package name and permissions for app;  if Dict, the dictionary MUST contain “package_name” as a key, and
optionally contain “permissions” as a key (otherwise assumed to be empty)</p></li>
<li><p><strong>device</strong> – which device app resides on</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">install</span><span class="p">(</span><span class="n">device</span><span class="p">:</span><span class="n">Device</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">app</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Application</span><span class="o">.</span><span class="n">from_apk_async</span><span class="p">(</span><span class="s2">&quot;some.apk&quot;</span><span class="p">,</span> <span class="n">device</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">app</span><span class="o">.</span><span class="n">grant_permissions</span><span class="p">([</span><span class="s2">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>or the non-async version</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">install</span><span class="p">(</span><span class="n">device</span><span class="p">:</span> <span class="n">Device</span><span class="p">):</span>
<span class="gp">... </span>   <span class="n">app</span> <span class="o">=</span> <span class="n">Application</span><span class="o">.</span><span class="n">from_apk</span><span class="p">(</span><span class="s2">&quot;some.apk&quot;</span><span class="p">,</span> <span class="n">device</span><span class="p">)</span>
<span class="gp">... </span>   <span class="n">app</span><span class="o">.</span><span class="n">grant_permissions</span><span class="p">([</span><span class="s2">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span><span class="p">])</span>
</pre></div>
</div>
<dl class="py method">
<dt id="androidtestorchestrator.application.Application.clean_kill">
<code class="sig-name descname">clean_kill</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.application.Application.clean_kill" title="Permalink to this definition">¶</a></dt>
<dd><p>Running this command to close the app is equivalent to the app being backgrounded, and then having the system
kill the app to clear up resources for other apps. It is also equivalent to closing the app from the “Recent
Apps” menu.</p>
<p>Subsequent launches of the app will need to recreate the app from scratch, and is considered a
cold app launch.
NOTE: Currently appears to only work with Android 9.0 devices</p>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.Application.clear_data">
<code class="sig-name descname">clear_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">regrant_permissions</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.application.Application.clear_data" title="Permalink to this definition">¶</a></dt>
<dd><p>clears app data for given package</p>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.Application.from_apk">
<em class="property">classmethod </em><code class="sig-name descname">from_apk</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">apk_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">device</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#androidtestorchestrator.device.Device" title="androidtestorchestrator.device.Device">androidtestorchestrator.device.Device</a></span></em>, <em class="sig-param"><span class="n">as_upgrade</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; _TApp<a class="headerlink" href="#androidtestorchestrator.application.Application.from_apk" title="Permalink to this definition">¶</a></dt>
<dd><p>Install provided application, blocking until install is complete</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>apk_path</strong> – path to apk</p></li>
<li><p><strong>device</strong> – device to install on</p></li>
<li><p><strong>as_upgrade</strong> – whether to install as upgrade or not</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>remote installed application</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>Exception if failure ot install or verify installation</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">app</span> <span class="o">=</span> <span class="n">Application</span><span class="o">.</span><span class="n">from_apk</span><span class="p">(</span><span class="s2">&quot;/local/path/to/apk&quot;</span><span class="p">,</span> <span class="n">device</span><span class="p">,</span> <span class="n">as_upgrade</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.Application.from_apk_async">
<em class="property">async classmethod </em><code class="sig-name descname">from_apk_async</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">apk_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">device</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#androidtestorchestrator.device.Device" title="androidtestorchestrator.device.Device">androidtestorchestrator.device.Device</a></span></em>, <em class="sig-param"><span class="n">as_upgrade</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; _TApp<a class="headerlink" href="#androidtestorchestrator.application.Application.from_apk_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Install application asynchronously.  This allows the output of the install to be processed
in a streamed fashion.  This can be useful on some devices that are non-standard android where installs
cause (for example) a pop-up requesting direct user permission for the install – monitoring for a specific
message to simulate the tap to confirm the install.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>apk_path</strong> – path to apk</p></li>
<li><p><strong>device</strong> – device to install on</p></li>
<li><p><strong>as_upgrade</strong> – whether to install as upgrade or not</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>remote installed application</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>Exception if failure of install or verify installation</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">install</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">async</span> <span class="k">with</span> <span class="k">await</span> <span class="n">Application</span><span class="o">.</span><span class="n">from_apk_async</span><span class="p">(</span><span class="s2">&quot;/some/local/path/to/apk&quot;</span><span class="p">,</span> <span class="n">device</span><span class="p">)</span> <span class="k">as</span> <span class="n">stdout</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">async</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">stdout</span><span class="p">:</span>
<span class="gp">... </span>           <span class="k">if</span> <span class="s2">&quot;some trigger message&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
<span class="gp">... </span>              <span class="n">perform_tap_to_accept_install</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.Application.grant_permissions">
<code class="sig-name descname">grant_permissions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">permissions</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Set<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.application.Application.grant_permissions" title="Permalink to this definition">¶</a></dt>
<dd><p>Grant permissions for a package on a device</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>permissions</strong> – string list of Android permissions to be granted, or None to grant app’s defined
user permissions</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the list of all permissions granted to the app</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.Application.granted_permissions">
<em class="property">property </em><code class="sig-name descname">granted_permissions</code><a class="headerlink" href="#androidtestorchestrator.application.Application.granted_permissions" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>set of all permissions granted to the app</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.Application.in_foreground">
<code class="sig-name descname">in_foreground</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ignore_silent_apps</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#androidtestorchestrator.application.Application.in_foreground" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>whether app is currently in foreground</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.Application.launch">
<em class="property">async </em><code class="sig-name descname">launch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">activity</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">options</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">intent</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.application.Application.launch" title="Permalink to this definition">¶</a></dt>
<dd><p>start the app, monitoring logcat output until it indicates app has either Displayed or crashed</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>activity</strong> – which Android Activity to invoke on start of app</p></li>
<li><p><strong>intent</strong> – which Intent to invoke, or None for default intent</p></li>
<li><p><strong>options</strong> – string list of options to pass on to the “am start” command on the remote device, or None</p></li>
<li><p><strong>timeout</strong> – if not none, timeout if no detection of startup after at least this many seconds</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>Exception if app crashes during start and fails to display</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.Application.monkey">
<code class="sig-name descname">monkey</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">count</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.application.Application.monkey" title="Permalink to this definition">¶</a></dt>
<dd><p>Run monkey against application
More to read about adb monkey at <a class="reference external" href="https://developer.android.com/studio/test/monkey#command-options-reference">https://developer.android.com/studio/test/monkey#command-options-reference</a></p>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.Application.package_name">
<em class="property">property </em><code class="sig-name descname">package_name</code><a class="headerlink" href="#androidtestorchestrator.application.Application.package_name" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Android package name associated with this app</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.Application.pid">
<em class="property">property </em><code class="sig-name descname">pid</code><a class="headerlink" href="#androidtestorchestrator.application.Application.pid" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>pid of app if running (either in foreground or background) or None if not running</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.Application.regrant_permissions">
<code class="sig-name descname">regrant_permissions</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Set<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.application.Application.regrant_permissions" title="Permalink to this definition">¶</a></dt>
<dd><p>Regrant permissions (e.g. if an app’s data was cleared) that were previously granted</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of permissions that are currently granted to the app</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.Application.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">activity</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">options</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">intent</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.application.Application.start" title="Permalink to this definition">¶</a></dt>
<dd><p>start an app on the device</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>activity</strong> – which Android Activity to invoke on start of app</p></li>
<li><p><strong>intent</strong> – which Intent to invoke, or None for default intent</p></li>
<li><p><strong>options</strong> – string list of options to pass on to the “am start” command on the remote device, or None</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.Application.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">force</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.application.Application.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>stop this app on the device</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>force</strong> – perform a force-stop if true (kill of app) rather than normal stop</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.Application.uninstall">
<code class="sig-name descname">uninstall</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.application.Application.uninstall" title="Permalink to this definition">¶</a></dt>
<dd><p>Uninstall this app from remote device.</p>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.Application.version">
<em class="property">property </em><code class="sig-name descname">version</code><a class="headerlink" href="#androidtestorchestrator.application.Application.version" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>version of this app</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="androidtestorchestrator.application.ServiceApplication">
<em class="property">class </em><code class="sig-name descname">ServiceApplication</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">device</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#androidtestorchestrator.device.Device" title="androidtestorchestrator.device.Device">androidtestorchestrator.device.Device</a></span></em>, <em class="sig-param"><span class="n">manifest</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>apk_bitminer.parsing.AXMLParser<span class="p">, </span>Dict<span class="p">[</span>str<span class="p">, </span>str<span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#androidtestorchestrator.application.ServiceApplication" title="Permalink to this definition">¶</a></dt>
<dd><p>Class representing an Android application that is specifically a service</p>
<dl class="py method">
<dt id="androidtestorchestrator.application.ServiceApplication.broadcast">
<code class="sig-name descname">broadcast</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">activity</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">options</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">action</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.application.ServiceApplication.broadcast" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoke an intent associated with this service by broadcasting an event
:param activity: activity that handles the intent
:param options: string list of options to supply to “am broadcast” command
:param action: if not None, invoke specific action
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.ServiceApplication.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">activity</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">options</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">intent</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">foreground</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.application.ServiceApplication.start" title="Permalink to this definition">¶</a></dt>
<dd><p>invoke an intent associated with this service by calling start the service</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>options</strong> – string list of options to supply to “am startservice” command</p></li>
<li><p><strong>activity</strong> – activity handles the intent</p></li>
<li><p><strong>intent</strong> – if not None, invoke specific intent otherwise invoke default intent</p></li>
<li><p><strong>foreground</strong> – whether to start in foreground or not (Android O+
does not allow background starts any longer)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="androidtestorchestrator.application.TestApplication">
<em class="property">class </em><code class="sig-name descname">TestApplication</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">device</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#androidtestorchestrator.device.Device" title="androidtestorchestrator.device.Device">androidtestorchestrator.device.Device</a></span></em>, <em class="sig-param"><span class="n">manifest</span><span class="p">:</span> <span class="n">apk_bitminer.parsing.AXMLParser</span></em><span class="sig-paren">)</span><a class="headerlink" href="#androidtestorchestrator.application.TestApplication" title="Permalink to this definition">¶</a></dt>
<dd><p>Class representing an Android test application installed on a remote device
It is recommended to  create instances via the class-method <cite>from_apk</cite> or <cite>from_apk_async</cite>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">install_test_app</span><span class="p">(</span><span class="n">device</span><span class="p">:</span> <span class="n">Device</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">await</span> <span class="n">test_app</span> <span class="o">=</span> <span class="n">TestApplication</span><span class="o">.</span><span class="n">from_apk</span><span class="p">(</span><span class="s2">&quot;some.apk&quot;</span><span class="p">,</span> <span class="n">device</span><span class="p">)</span>
<span class="gp">... </span>   <span class="n">test_app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>or the non-async version:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">install_test_app</span><span class="p">(</span><span class="n">device</span><span class="p">:</span> <span class="n">Device</span><span class="p">):</span>
<span class="gp">... </span>   <span class="n">test_app</span> <span class="o">=</span> <span class="n">TestApplication</span><span class="o">.</span><span class="n">from_apk</span><span class="p">(</span><span class="s2">&quot;some.apk&quot;</span><span class="p">,</span> <span class="n">device</span><span class="p">)</span>
<span class="gp">... </span>   <span class="n">test_app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device</strong> – which device app resides on</p></li>
<li><p><strong>mainfest</strong> – contains info about app</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="androidtestorchestrator.application.TestApplication.from_apk">
<em class="property">classmethod </em><code class="sig-name descname">from_apk</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">apk_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">device</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#androidtestorchestrator.device.Device" title="androidtestorchestrator.device.Device">androidtestorchestrator.device.Device</a></span></em>, <em class="sig-param"><span class="n">as_upgrade</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; _TTestApp<a class="headerlink" href="#androidtestorchestrator.application.TestApplication.from_apk" title="Permalink to this definition">¶</a></dt>
<dd><p>Install apk as a test application on the given device</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>apk_path</strong> – path to test apk (containing a runner)</p></li>
<li><p><strong>device</strong> – device to install on</p></li>
<li><p><strong>as_upgrade</strong> – whether to install as upgrade or not</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>TestApplication</cite> of installed apk</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test_application</span> <span class="o">=</span> <span class="n">Application</span><span class="o">.</span><span class="n">from_apk</span><span class="p">(</span><span class="s2">&quot;/local/path/to/apk&quot;</span><span class="p">,</span> <span class="n">device</span><span class="p">,</span> <span class="n">as_upgrade</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.TestApplication.from_apk_async">
<em class="property">async classmethod </em><code class="sig-name descname">from_apk_async</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">apk_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">device</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#androidtestorchestrator.device.Device" title="androidtestorchestrator.device.Device">androidtestorchestrator.device.Device</a></span></em>, <em class="sig-param"><span class="n">as_upgrade</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; _TTestApp<a class="headerlink" href="#androidtestorchestrator.application.TestApplication.from_apk_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Install apk as a test application on the given device</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>apk_path</strong> – path to test apk (containing a runner)</p></li>
<li><p><strong>device</strong> – device to install on</p></li>
<li><p><strong>as_upgrade</strong> – whether to install as upgrade or not</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>TestApplication</cite> of installed apk</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">application</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Application</span><span class="o">.</span><span class="n">from_apk_async</span><span class="p">(</span><span class="s2">&quot;local/path/to/apk&quot;</span><span class="p">,</span> <span class="n">device</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.TestApplication.list_runners">
<code class="sig-name descname">list_runners</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.application.TestApplication.list_runners" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>all test runners available for that package</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.TestApplication.run">
<em class="property">async </em><code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">options</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">loop</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>asyncio.events.AbstractEventLoop<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; AbstractAsyncContextManager<span class="p">[</span>Any<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.application.TestApplication.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run an instrumentation test package, yielding lines from std output</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>options</strong> – arguments to pass to instrument command</p></li>
<li><p><strong>loop</strong> – event loop to execute under, or None for default event loop</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>return coroutine wrapping an asyncio context manager for iterating over lines</p>
</dd>
</dl>
<p>:raises Device.CommandExecutionFailureException with non-zero return code information on non-zero exit status</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">app</span> <span class="o">=</span> <span class="n">TestApplication</span><span class="o">.</span><span class="n">fromApk</span><span class="p">(</span><span class="s2">&quot;some.apk&quot;</span><span class="p">,</span> <span class="n">device</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span><span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">async</span> <span class="k">with</span> <span class="k">await</span> <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span> <span class="k">as</span> <span class="n">stdout</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">async</span>  <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">stdout</span><span class="p">:</span>
<span class="gp">... </span>            <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.TestApplication.run_orchestrated">
<em class="property">async </em><code class="sig-name descname">run_orchestrated</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">options</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">loop</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>asyncio.events.AbstractEventLoop<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; AbstractAsyncContextManager<span class="p">[</span>Any<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.application.TestApplication.run_orchestrated" title="Permalink to this definition">¶</a></dt>
<dd><p>Run an instrumentation test package via Google’s test orchestrator that</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>options</strong> – arguments to pass to instrument command</p></li>
<li><p><strong>loop</strong> – event loop to execute under, or None for default event loop</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>return coroutine wrapping an asyncio context manager for iterating over lines</p>
</dd>
</dl>
<p>:raises Device.CommandExecutionFailureException with non-zero return code information on non-zero exit status</p>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.TestApplication.runner">
<em class="property">property </em><code class="sig-name descname">runner</code><a class="headerlink" href="#androidtestorchestrator.application.TestApplication.runner" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>runner associated with this test app</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.application.TestApplication.target_application">
<em class="property">property </em><code class="sig-name descname">target_application</code><a class="headerlink" href="#androidtestorchestrator.application.TestApplication.target_application" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>target application under test for this test app</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-androidtestorchestrator.devicestorage">
<span id="pushing-and-pulling-files-to-from-device-storage"></span><h2><a class="toc-backref" href="#id8">Pushing and Pulling Files to/from Device Storage</a><a class="headerlink" href="#module-androidtestorchestrator.devicestorage" title="Permalink to this headline">¶</a></h2>
<p>The <em>devicestorage</em> package provides the API for working with a devices (sdcard) storage</p>
<dl class="py class">
<dt id="androidtestorchestrator.devicestorage.DeviceStorage">
<em class="property">class </em><code class="sig-name descname">DeviceStorage</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">device</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#androidtestorchestrator.device.Device" title="androidtestorchestrator.device.Device">androidtestorchestrator.device.Device</a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#androidtestorchestrator.devicestorage.DeviceStorage" title="Permalink to this definition">¶</a></dt>
<dd><p>Class providing API to push, push and pull files to a remote device</p>
<dl class="py method">
<dt id="androidtestorchestrator.devicestorage.DeviceStorage.external_storage_location">
<em class="property">property </em><code class="sig-name descname">external_storage_location</code><a class="headerlink" href="#androidtestorchestrator.devicestorage.DeviceStorage.external_storage_location" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>location on remote device of external storage</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.devicestorage.DeviceStorage.make_dir">
<code class="sig-name descname">make_dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">run_as</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.devicestorage.DeviceStorage.make_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>make a directory on remote device</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – path to create</p></li>
<li><p><strong>run_as</strong> – user to run command under on remote device, or None</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#androidtestorchestrator.device.Device.CommandExecutionFailureException" title="androidtestorchestrator.device.Device.CommandExecutionFailureException"><strong>Device.CommandExecutionFailureException</strong></a> – on failure to create directory</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.devicestorage.DeviceStorage.pull">
<code class="sig-name descname">pull</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">remote_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">local_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">run_as</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.devicestorage.DeviceStorage.pull" title="Permalink to this definition">¶</a></dt>
<dd><p>Pull a file from device</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>remote_path</strong> – location on phone to pull file from</p></li>
<li><p><strong>local_path</strong> – path to file to be created from content from device</p></li>
<li><p><strong>run_as</strong> – user to run command under on remote device, or None</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>FileExistsError</strong> – if the locat path already exists</p></li>
<li><p><a class="reference internal" href="#androidtestorchestrator.device.Device.CommandExecutionFailureException" title="androidtestorchestrator.device.Device.CommandExecutionFailureException"><strong>Device.CommandExecutionFailureException</strong></a> – if command to pull file failed</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.devicestorage.DeviceStorage.pull_async">
<em class="property">async </em><code class="sig-name descname">pull_async</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">remote_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">local_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.devicestorage.DeviceStorage.pull_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Pull a file from device</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>remote_path</strong> – location on phone to pull file from</p></li>
<li><p><strong>local_path</strong> – path to file to be created from content from device</p></li>
<li><p><strong>timeout</strong> – timeout in seconds before raising TimeoutError, or None for no expiry</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>FileExistsError</strong> – if the locat path already exists</p></li>
<li><p><a class="reference internal" href="#androidtestorchestrator.device.Device.CommandExecutionFailureException" title="androidtestorchestrator.device.Device.CommandExecutionFailureException"><strong>Device.CommandExecutionFailureException</strong></a> – if command to pull file failed</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.devicestorage.DeviceStorage.push">
<code class="sig-name descname">push</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">local_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">remote_path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.devicestorage.DeviceStorage.push" title="Permalink to this definition">¶</a></dt>
<dd><p>Push a local file to the given location on the remote device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_path</strong> – path to local host file</p></li>
<li><p><strong>remote_path</strong> – path to place file on the remote device</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>FileNotFoundError</strong> – if provide local path does not exist and is a file</p></li>
<li><p><a class="reference internal" href="#androidtestorchestrator.device.Device.CommandExecutionFailureException" title="androidtestorchestrator.device.Device.CommandExecutionFailureException"><strong>Device.CommandExecutionFailureException</strong></a> – if command to push file failed</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.devicestorage.DeviceStorage.push_async">
<em class="property">async </em><code class="sig-name descname">push_async</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">local_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">remote_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.devicestorage.DeviceStorage.push_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Push a local file asynchronously to the given location on the remote device</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_path</strong> – path to local host file</p></li>
<li><p><strong>remote_path</strong> – path to place file on the remote device</p></li>
<li><p><strong>timeout</strong> – timeout in seconds before raising TimeoutError, or None for no expiry</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>FileNotFoundError</strong> – if provide local path does not exist and is a file</p></li>
<li><p><a class="reference internal" href="#androidtestorchestrator.device.Device.CommandExecutionFailureException" title="androidtestorchestrator.device.Device.CommandExecutionFailureException"><strong>Device.CommandExecutionFailureException</strong></a> – if command to push file failed</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.devicestorage.DeviceStorage.remove">
<code class="sig-name descname">remove</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">recursive</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">run_as</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.devicestorage.DeviceStorage.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>remove a file or directory from remote device</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – path to remove</p></li>
<li><p><strong>recursive</strong> – if True and path is directory, recursively remove all contents otherwise, othrewise raise
Exception if directory is not empty</p></li>
<li><p><strong>run_as</strong> – user to run command under on remote device, or None</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#androidtestorchestrator.device.Device.CommandExecutionFailureException" title="androidtestorchestrator.device.Device.CommandExecutionFailureException"><strong>Device.CommandExecutionFailureException</strong></a> – on failure to remote specified path</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-androidtestorchestrator.devicelog">
<span id="accessing-logcat"></span><h2><a class="toc-backref" href="#id9">Accessing logcat</a><a class="headerlink" href="#module-androidtestorchestrator.devicelog" title="Permalink to this headline">¶</a></h2>
<p>The <em>devielog</em> package provides the API for streaming, capturing and manipulating the device log</p>
<dl class="py class">
<dt id="androidtestorchestrator.devicelog.DeviceLog">
<em class="property">class </em><code class="sig-name descname">DeviceLog</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">device</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#androidtestorchestrator.device.Device" title="androidtestorchestrator.device.Device">androidtestorchestrator.device.Device</a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#androidtestorchestrator.devicelog.DeviceLog" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to read, capture and clear a device’s log (Android logcat)</p>
<dl class="py class">
<dt id="androidtestorchestrator.devicelog.DeviceLog.LogCapture">
<em class="property">class </em><code class="sig-name descname">LogCapture</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">device</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#androidtestorchestrator.device.Device" title="androidtestorchestrator.device.Device">androidtestorchestrator.device.Device</a></span></em>, <em class="sig-param"><span class="n">output_path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#androidtestorchestrator.devicelog.DeviceLog.LogCapture" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager to capture continuous logcat output from an Android device to a file.
On exit, will terminat the logcat process, closing the file</p>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.devicelog.DeviceLog.capture_to_file">
<code class="sig-name descname">capture_to_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">output_path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; LogCapture<a class="headerlink" href="#androidtestorchestrator.devicelog.DeviceLog.capture_to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Capture log to a file. This is a convenience method over instantiating
an instance of LogCaptur directly</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>output_path</strong> – path to capture log output to</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>context manager for capturing output to specified file</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">device</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span><span class="s2">&quot;some_serial_id&quot;</span><span class="p">,</span> <span class="s2">&quot;/path/to/adb&quot;</span><span class="p">)</span>
<span class="gp">... </span><span class="n">log</span> <span class="o">=</span> <span class="n">DeviceLog</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
<span class="gp">... </span><span class="k">with</span> <span class="n">log</span><span class="o">.</span><span class="n">capture_to_file</span><span class="p">(</span><span class="s2">&quot;./log.txt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">log_capture</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">log_capture</span><span class="o">.</span><span class="n">mark_start</span><span class="p">(</span><span class="s2">&quot;some_task&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="c1"># do_something()</span>
<span class="gp">... </span>    <span class="n">log_capture</span><span class="o">.</span><span class="n">mark_end</span><span class="p">(</span><span class="s2">&quot;some_task&quot;</span><span class="p">)</span>
<span class="gp">... </span><span class="c1"># file closed, logcat process terminated</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.devicelog.DeviceLog.clear">
<code class="sig-name descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.devicelog.DeviceLog.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>clear device log on the device and start fresh</p>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.devicelog.DeviceLog.get_logcat_buffer_size">
<code class="sig-name descname">get_logcat_buffer_size</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">channel</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'main'</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.devicelog.DeviceLog.get_logcat_buffer_size" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>channel</strong> – which channel’s size (‘main’, ‘system’, or ‘crash’)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the logcat buffer size for given channel, or None if not defined</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.devicelog.DeviceLog.logcat">
<em class="property">async </em><code class="sig-name descname">logcat</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">options</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">loop</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>asyncio.events.AbstractEventLoop<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; AbstractAsyncContextManager<span class="p">[</span>Any<span class="p">]</span><a class="headerlink" href="#androidtestorchestrator.devicelog.DeviceLog.logcat" title="Permalink to this definition">¶</a></dt>
<dd><p>async generator to continually output lines from logcat until client
exits processing (exist async iterator), at which point process is killed</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>options</strong> – list of string options to provide to logcat command</p></li>
<li><p><strong>loop</strong> – specific asyncio loop to use or None for default</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>AsyncGenerator to iterate over lines of logcat</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>asyncio.TimeoutError if timeout is not None and timeout is reached</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.devicelog.DeviceLog.logcat_buffer_size">
<em class="property">property </em><code class="sig-name descname">logcat_buffer_size</code><a class="headerlink" href="#androidtestorchestrator.devicelog.DeviceLog.logcat_buffer_size" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>channel</strong> – which channel’s size (‘main’, ‘system’, or ‘crash’)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the logcat buffer size for given channel, or None if not defined</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="androidtestorchestrator.devicelog.DeviceLog.set_logcat_buffer_size">
<code class="sig-name descname">set_logcat_buffer_size</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size_spec</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#androidtestorchestrator.devicelog.DeviceLog.set_logcat_buffer_size" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>size_spec</strong> – string spec (per adb logcat –help) for size of buffer (e.g. 10M = 10 megabytes)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="indices-and-tables">
<h1><a class="toc-backref" href="#id10">Indices and tables</a><a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">AndroidTestOrchestrator</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Developer's Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html">Welcome to AndroidTestOrchestrator’s Developer Guide!</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html#introduction">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html#test-execution-on-android">Test Execution on Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html#distributing-and-parallelizing-testing">Distributing and Parallelizing Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html#the-architecture">The Architecture</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
      <li>Next: <a href="developer_guide.html" title="next chapter">Welcome to AndroidTestOrchestrator’s Developer Guide!</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, John Rusnak.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>