<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Welcome to Bantam’s Documentation! &#8212; bantam  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="welcome-to-bantam-s-documentation">
<h1>Welcome to Bantam’s Documentation!<a class="headerlink" href="#welcome-to-bantam-s-documentation" title="Permalink to this heading">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
</section>
<section id="indices-and-tables">
<h1>Indices and Tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this heading">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>
<section id="module-bantam">
<span id="introduction"></span><h1>Introduction<a class="headerlink" href="#module-bantam" title="Permalink to this heading">¶</a></h1>
<p>Welcome to Bantam, a framework for running a web server, built on top of <em>aiohttp</em>,
poviding a convience-layer of abstraction.
The framework allows users to define a Python web API through static methods of classes,
and allows auto-generation of corresponding javascript APIs to match.  The developer need not
be concerned about the details of how to map routes nor to understand the details of HTTP transactions.
Ths developer need only focus on development of a web API as a Python interface.</p>
<section id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading">¶</a></h2>
<p>Let’s look at setting up a simple WebApplication on your localhost:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">bantam.http</span> <span class="kn">import</span> <span class="n">web_api</span><span class="p">,</span> <span class="n">RestMethod</span><span class="p">,</span> <span class="n">WebApplication</span>
<span class="gp">...</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">Greetings</span><span class="p">:</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@classmethod</span>
<span class="gp">... </span>    <span class="nd">@web_api</span><span class="p">(</span><span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;text/html&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">RestMethod</span><span class="o">.</span><span class="n">GET</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">welcome</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="gp">... </span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="gp">... </span><span class="sd">        Welcome someone</span>
<span class="gp">...</span>
<span class="gp">... </span><span class="sd">        :@param name: name of person to greet</span>
<span class="gp">... </span><span class="sd">        :return: a salutation of welcome</span>
<span class="gp">... </span><span class="sd">        &quot;&quot;&quot;</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;html&gt;&lt;body&gt;&lt;p&gt;Welcome, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">!&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@classmethod</span>
<span class="gp">... </span>    <span class="nd">@web_api</span><span class="p">(</span><span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;text/html&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">RestMethod</span><span class="o">.</span><span class="n">GET</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">goodbye</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">type_of_day</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="gp">... </span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="gp">... </span><span class="sd">        Tell someone goodbye by telling them to have a day (of the given type)</span>
<span class="gp">...</span>
<span class="gp">... </span><span class="sd">        :@param type_of_day:  an adjective describe what type of day to have</span>
<span class="gp">... </span><span class="sd">        :return: a saltation of welcome</span>
<span class="gp">... </span><span class="sd">        &quot;&quot;&quot;</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;html&gt;&lt;body&gt;&lt;p&gt;Have a </span><span class="si">{</span><span class="n">type_of_day</span><span class="si">}</span><span class="s2"> day!&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span>
<span class="gp">...</span>
<span class="gp">... </span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">app</span> <span class="o">=</span> <span class="n">WebApplication</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">start</span><span class="p">())</span> <span class="c1"># default to localhost HTTP on port 8080</span>
</pre></div>
</div>
<p>Saving this to a file, ‘salutations.py’, you can run this start your server:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>python3<span class="w"> </span>salutations.py
</pre></div>
</div>
<p>Then open a browser to the following URL’s:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://localhost:8080/Greetings/welcome?name=Bob">http://localhost:8080/Greetings/welcome?name=Bob</a></p></li>
<li><p><a class="reference external" href="http://localhost:8080/Greetings/goodbye?type_of_day=wonderful">http://localhost:8080/Greetings/goodbye?type_of_day=wonderful</a></p></li>
</ul>
<p>to display various salutiations.</p>
<p>To explain this code, the <em>&#64;web_api</em> decorator declares a method that is mapped to a route. The route is determined
by the class name, in this case <em>Greetings</em>, and the method name. Thus, the “welcome” method above, as a member of
<em>Greetings</em> class, is mapped to the route ‘/Greetings/welcome”.  There are some rules about methods declared as
<em>&#64;web_api</em>:</p>
<ol class="arabic simple">
<li><p>They can be &#64;staticmethods, &#64;classmethods or even instance methods (explained below), but &#64;classmethod or
instance methods are prefered</p></li>
<li><p>They must provide all type hints for parameters and return value.  The types must
be of only specific kinds as explained below</p></li>
<li><p>Be judicious on GET vs POST, particuraly being mindfl of the amount of data to be passed in parameters as
wll as returned.  Large data transfers should use POST</p></li>
</ol>
<p>The query parameters provided in the full URL are mapped to the parameters in the Python method.  For example,
the query parameter name=Box in the first URL above maps to the <em>name</em> parameter of the <em>Greetings.welcome</em> method,
with ‘Bob’ as the value.
The query parameters are translated to the value and type expected by the
Python API. If the value is not convertible to the proper type, an error code along with reason are returned.
There are a few other options for parameters and return type that will be  discussed later on streaming.</p>
<p>The methods can also be declared as POST operations.  In this case, parameter values would be sent as part of the
payload of the request (not query parameters) as a simple JSON dictionary.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Although the code prevents name collisions, the underlying (automated) routes do not, and a route must be unique.
Thus, each pair of class/method declared as a &#64;web_api must be unique, even across differing modules.</p>
</div>
</section>
<p>The specific WebApplication API is simple, and only the <em>start</em> method is of importance:</p>
<dl class="py class">
<dt class="sig sig-object py" id="bantam.http.WebApplication">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bantam.http.</span></span><span class="sig-name descname"><span class="pre">WebApplication</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">static_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">js_bundle_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">handler_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_max_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1048576</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">using_async</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Ellipsis</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bantam.http.WebApplication" title="Permalink to this definition">¶</a></dt>
<dd><p>Main class for running a WebApplication server. See the documentation for <em>aiohttp</em> for information on the various
parameters.  Additional parameters for this class are:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>static_path</strong> – root path to where static files will be kept, mapped to a route “/static”, if provided</p></li>
<li><p><strong>js_bundle_name</strong> – the name of the javascript file, <strong>without</strong> extension, where the client-side API
will be generated, if provided</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py" id="bantam.http.WebApplication.DuplicateRoute">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DuplicateRoute</span></span><a class="headerlink" href="#bantam.http.WebApplication.DuplicateRoute" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised if an attempt is made to register a web_api function under an existing route</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bantam.http.WebApplication.start">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modules</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutdown_timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">60.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_context</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">SSLContext</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backlog</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">128</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">handle_signals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reuse_address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reuse_port</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#bantam.http.WebApplication.start" title="Permalink to this definition">¶</a></dt>
<dd><p>start the app</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>modules</strong> – list of name of modules to import that contain the &#64;web_api definitions to use, must not be
empty and will be imported to load the &#64;web_api definitions</p></li>
<li><p><strong>host</strong> – optional host of app, defaults to ‘127.0.0.1’</p></li>
<li><p><strong>port</strong> – optional port to listen on (TCP)</p></li>
<li><p><strong>path</strong> – path, if using UNIX domain sockets to listen on (cannot specify both TCP and domain parameters)</p></li>
<li><p><strong>shutdown_timeout</strong> – force shutdown if a shutdown call fails to take hold after this many seconds</p></li>
<li><p><strong>ssl_context</strong> – for HTTPS server; if not provided, will default to HTTP connection</p></li>
<li><p><strong>backlog</strong> – number of unaccepted connections before system will refuse new connections</p></li>
<li><p><strong>handle_signals</strong> – gracefully handle TERM signal or not</p></li>
<li><p><strong>reuse_address</strong> – tells the kernel to reuse a local socket in TIME_WAIT state, without waiting for its
natural timeout to expire. If not specified will automatically be set to True on UNIX.</p></li>
<li><p><strong>reuse_port</strong> – tells the kernel to allow this endpoint to be bound to the same port as other existing
endpoints are bound to, so long as they all set this flag when being created. This option is not supported
on Windows.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p>Of particular interest is the modules parameter of the start method.  This determines which modules and therefore
which classes and their the &#64;web_api definitions are loaded.</p>
<span class="target" id="module-bantam.decorators"></span><dl class="py function">
<dt class="sig sig-object py" id="bantam.decorators.web_api">
<span class="sig-prename descclassname"><span class="pre">bantam.decorators.</span></span><span class="sig-name descname"><span class="pre">web_api</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">RestMethod</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">RestMethod.GET</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_constructor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expire_obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on_disconnect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ClientTimeout</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uuid_param</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preprocess</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Request</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">postprocess</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Response</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">StreamResponse</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Response</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">StreamResponse</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Awaitable</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Awaitable</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#bantam.decorators.web_api" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for class async method to register it as an API with the <cite>WebApplication</cite> class
Decorated functions should be static class methods with parameters that are convertible from a string
(things like float, int, str, bool).  Type hints must be provided and will be used to dynamically convert
query parameeter strings to the right type.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MyResource</span><span class="p">:</span>
<span class="gp">...</span>
<span class="gp">... </span>  <span class="nd">@web_api</span><span class="p">(</span><span class="n">content_type</span><span class="o">=</span><span class="s2">&quot;text/html&quot;</span><span class="p">)</span>
<span class="gp">... </span>  <span class="nd">@staticmethod</span>
<span class="gp">... </span>  <span class="k">def</span> <span class="nf">say_hello</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="gp">... </span>     <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Hi there, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">!&quot;</span>
</pre></div>
</div>
<p>Only GET calls with explicit parameters in the URL are support for now.  The above registers a route
of the form:</p>
<p><a class="reference external" href="http:/">http:/</a>/&lt;host&gt;:port&gt;/MyRestAPI?name=Jill</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>content_type</strong> – content type to disply (e.g., “text/html”)</p></li>
<li><p><strong>method</strong> – one of MethodEnum rest api methods (GET or POST)</p></li>
<li><p><strong>is_constructor</strong> – set to True if API is static method return a class instnace, False oherwise (default)</p></li>
<li><p><strong>expire_obj</strong> – for instance methods only, epxire the object upon successful completion of that call</p></li>
<li><p><strong>on_disconnect</strong> – callback if client disconnects unexpectedly</p></li>
<li><p><strong>timeout</strong> – optional timeout value for response to request to timeout</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>callable decorator</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="allowed-type-annotations">
<h1>Allowed Type Annotations<a class="headerlink" href="#allowed-type-annotations" title="Permalink to this heading">¶</a></h1>
<p>Being http-based, the magic behind the scenes in abstracting the HTTP protocol away from the client occurs through
json serialization and deserialization.  This means that only certain type hints are allowed in the signature of a
method decorated with &#64;web_api:</p>
<ol class="arabic simple">
<li><p>The basic builtins of <em>int</em>, <em>float</em>, <em>str</em>, <em>bool</em></p></li>
<li><p>For arguments, the builtins of <em>list</em>, <em>set</em>, <em>tuple</em> and <em>dict</em>; the return type must be explicit
(e.g. <em>Dict[Union[int, str]]</em>),as the system must know the type when converting fom a generic json string</p></li>
<li><p>Anything hat is decorated with &#64;dataclass and whose element types meet these criteria (recursively)</p></li>
<li><p>Any typing <em>Dict</em>, <em>List</em>, <em>Set</em>, <em>Tuple</em>, provided the (key and) element type recursively meet these criteria</p></li>
<li><p>Use of <em>Union</em> and <em>Optional</em> are allowed</p></li>
</ol>
<p>All arguments and the return type must be explicitly specified in the signature of &#64;web_api-decorated methods.</p>
</section>
<section id="client-side-code-generation">
<h1>Client-Side Code Generation<a class="headerlink" href="#client-side-code-generation" title="Permalink to this heading">¶</a></h1>
<p>As an even greater convenience,
Bantam provides means of auto-generating both javascript and client code to interact with a bantam-enabled application.
Javascript in particular can be generate on-the-fly and served upon startup.</p>
<section id="javascript">
<h2>Javascript<a class="headerlink" href="#javascript" title="Permalink to this heading">¶</a></h2>
<p>the code can be generated on the fly, when the <em>WebApplication</em> is created.
By providing two parameters to the init call to your <em>WebApplication</em>:</p>
<ul class="simple">
<li><p><em>static_path</em>: the root path to serve static files</p></li>
<li><p><em>js_bundle_name</em>: the name (<strong>without</strong> extension) of the javascript bundle file</p></li>
</ul>
<p>the javascript code will be (re)generated just before startup of the server.  The javascript file that provides
the web API on the client side will then be available under the static route <em>/static/js/&lt;js-bundle-name&gt;.js</em>.</p>
<p>In the example above the instantiations of the <em>app</em> would be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">WebApplication</span><span class="p">(</span><span class="n">static_path</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;./static&quot;</span><span class="p">),</span> <span class="n">js_bundle_name</span><span class="o">=</span><span class="s1">&#39;salutations&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The client interface is then available through:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://localhost:8080/static/js/salutations.js">http://localhost:8080/static/js/salutations.js</a></p></li>
</ul>
<p>Through a simple normal declaration of an API in the Python code, and auto-generation of client code, the developer
is free to ignore the details of the inner works of routes and HTTP transactions.</p>
<p>Furthermore, the web api that is registered is also directly callable as a Python function.  This engenders the
concept of “library-as-a-service”, where the code can act directly as a library or as a distributed Rest-ful
service transparently to the caller.</p>
<p>To provide more detail on what this generation look like:</p>
<span class="target" id="module-bantam.js"></span><p>Bantam provides the ability to auto-generate client-side javascript code to abstract the details of makting
HTTP requests to the server.  This abstraction implies that the developer never need to know about routes,
formulating URLs, how to make a POST request, how to stream data over HTTP, etc!</p>
<p>To generate client side code, create a Python source file – let’s name it generator.py –
and import all of the classes containing &#64;web_api’s
to be generated. Then add the main entry poitn to generate the javascript code, like so:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bantam.js</span> <span class="kn">import</span> <span class="n">JavascriptGenerator</span>
<span class="gp">... </span><span class="kn">from</span> <span class="nn">salutations</span> <span class="kn">import</span> <span class="n">Greetings</span>
<span class="gp">...</span>
<span class="gp">... </span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;salutations.js&#39;</span><span class="p">,</span> <span class="s1">&#39;bw&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output</span><span class="p">:</span>
<span class="gp">... </span>       <span class="n">JavascriptGenerator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">out</span><span class="o">=</span><span class="n">output</span><span class="p">,</span> <span class="n">skip_html</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Run the script as so:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>python<span class="w"> </span>generate.py
</pre></div>
</div>
<p>With the above Greetings example, the generated javasctipt code will mimic the Python:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">javascript code auto-generated from Python server’s web API</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="nx">bantam</span><span class="w"> </span><span class="p">{};</span>
<span class="nx">bantam</span><span class="p">.</span><span class="nx">salutations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="p">{};</span>
<span class="nx">bantam</span><span class="p">.</span><span class="nx">salutations</span><span class="p">.</span><span class="nx">Greetings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">site</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">site</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">site</span><span class="p">;}</span>

<span class="w">      </span><span class="cm">/*</span>
<span class="cm">      Welcome someone</span>
<span class="cm">      The response will be provided as the (first) parameter passed into onsuccess</span>

<span class="cm">      @param {function(string) =&gt; null} onsuccess callback inoked, passing in response from server on success</span>
<span class="cm">      @param {function(int, str) =&gt; null}  onerror  callback upon error, passing in response code and status text</span>
<span class="cm">      @param {{string}} name name of person to greet</span>
<span class="cm">      */</span>
<span class="w">      </span><span class="nx">welcome</span><span class="p">(</span><span class="nx">onsuccess</span><span class="p">,</span><span class="w"> </span><span class="nx">onerror</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="p">...</span>
<span class="w">      </span><span class="p">}</span>

<span class="w">       </span><span class="cm">/*</span>
<span class="cm">       Tell someone goodbye by telling them to have a day (of the given type)</span>
<span class="cm">       The response will be provided as the (first) parameter passed into onsuccess</span>

<span class="cm">       @param {function(string) =&gt; null} onsuccess callback inoked, passing in response from server on success</span>
<span class="cm">       @param {function(int, str) =&gt; null}  onerror  callback upon error, passing in response code and status text</span>
<span class="cm">       @param {{string}} type_of_day adjective describing type of day to have</span>
<span class="cm">       */</span>
<span class="w">      </span><span class="nx">goodbye</span><span class="p">(</span><span class="nx">onsuccess</span><span class="p">,</span><span class="w"> </span><span class="nx">onerror</span><span class="p">,</span><span class="w"> </span><span class="nx">type_of_day</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">      </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<p>The code maintains the same hierarchy in namespaces as modules in Python, albeit under a global <em>bantam</em> namespace.
This prevents potential namespace collisions.  The signatures of the API mimic those defined in the Pyhon codebase,
with the noted exception of the <em>onsuccess</em> and <em>onerror</em> callbacks as the first two parameters.
This is typical of how plain javascript handles asynchronous transactions:  rather than returning a value or raising an
exception, these callbacks are invoked instead, upon response from the server.</p>
</section>
<section id="module-bantam.client">
<span id="python"></span><h2>Python<a class="headerlink" href="#module-bantam.client" title="Permalink to this heading">¶</a></h2>
<p>Bantam provides and abstraction to easily declare Python clients to interact with a Bantam web application.</p>
<p>To access client code, a server implementation must inherit from an abstract interface common to both client
and server.  One defines an interface class (usually in its own file) such as:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span> <span class="kn">from</span> <span class="nn">bantam.client</span> <span class="kn">import</span> <span class="n">WebInterface</span>
<span class="gp">... </span> <span class="kn">from</span> <span class="nn">bantam.api</span> <span class="kn">import</span> <span class="n">RestMethod</span>
<span class="gp">... </span> <span class="kn">from</span> <span class="nn">bantam.decorators</span> <span class="n">web_api</span>
<span class="gp">... </span> <span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">AsyncIterator</span>
<span class="gp">... </span> <span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">abstractmethod</span>
<span class="gp">...</span>
<span class="gp">... </span> <span class="k">class</span> <span class="nc">MyServerApiInterface</span><span class="p">(</span><span class="n">WebInterface</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nd">@classmethod</span>
<span class="gp">... </span>    <span class="nd">@web_api</span><span class="p">(</span><span class="n">methos</span><span class="o">=</span><span class="n">RestMethod</span><span class="o">.</span><span class="n">GET</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;application/json&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nd">@abstractmethod</span>
<span class="gp">... </span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">constructor</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;MyServerApiInterface&quot;</span><span class="p">:</span>
<span class="gp">... </span><span class="w">       </span><span class="sd">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="sd">       Abstract constructor to create an instance of the class</span>
<span class="gp">... </span><span class="sd">       &#39;&#39;&#39;</span>
<span class="gp">...</span>
<span class="gp">... </span>     <span class="nd">@classmethod</span>
<span class="gp">... </span>     <span class="nd">@web_api</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">RestMethod</span><span class="o">.</span><span class="n">GET</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;text/plain&#39;</span><span class="p">)</span>
<span class="gp">... </span>     <span class="nd">@abstractmethod</span>
<span class="gp">... </span>     <span class="k">async</span> <span class="k">def</span> <span class="nf">class_method_api</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">parm1</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="gp">... </span><span class="w">         </span><span class="sd">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="sd">          Abstract class method to be implemented WITH SAME @web_api DECORATION</span>
<span class="gp">... </span><span class="sd">         &#39;&#39;&#39;</span>
<span class="gp">...</span>
<span class="gp">... </span>     <span class="nd">@web_api</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">RestMethod</span><span class="o">.</span><span class="n">POST</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;application/json&#39;</span><span class="p">)</span>
<span class="gp">... </span>     <span class="nd">@abstractmethod</span>
<span class="gp">... </span>     <span class="k">async</span> <span class="k">def</span> <span class="nf">instance_method_api</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncIterator</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="gp">... </span><span class="w">         </span><span class="sd">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="sd">         Abstract instance method that is an Async Iterator over string values. MUST</span>
<span class="gp">... </span><span class="sd">         HAVE SAME @web_api DECORATION AS SERVER IMPL DECLARATION</span>
<span class="gp">... </span><span class="sd">         &#39;&#39;&#39;</span>
<span class="gp">... </span>         <span class="c1"># never called since abstract, but needed to tell Python that implementation</span>
<span class="gp">... </span>         <span class="c1"># will be an async generator/iterator:</span>
<span class="gp">... </span>         <span class="k">yield</span> <span class="kc">None</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>One then defines the concrete class (which for best practice, has same name, sans ‘Interface’).  The
&#64;web_api decorators need not be specified as bantam will ensure they are inherited. (But if you do
specify them explicitly, you must ensure they are maintained to be the same):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span> <span class="kn">from</span> <span class="nn">bantam.client</span> <span class="kn">import</span> <span class="n">WebInterface</span>
<span class="gp">... </span> <span class="kn">from</span> <span class="nn">bantam.api</span> <span class="kn">import</span> <span class="n">RestMethod</span>
<span class="gp">... </span> <span class="kn">from</span> <span class="nn">bantam.decorators</span> <span class="n">web_api</span>
<span class="gp">... </span> <span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">AsyncIterator</span>
<span class="gp">...</span>
<span class="gp">... </span> <span class="k">class</span> <span class="nc">MyServerApi</span><span class="p">(</span><span class="n">MyServerApiInterface</span><span class="p">):</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_message_bits</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;am&#39;</span><span class="p">,</span> <span class="s1">&#39;the&#39;</span><span class="p">,</span> <span class="s1">&#39;very&#39;</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">]</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@classmethod</span>
<span class="gp">... </span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">constructor</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;MyServerApiInterface&quot;</span><span class="p">:</span>
<span class="gp">... </span><span class="w">       </span><span class="sd">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="sd">       Concreate constructor to create an instance of the class WITH SAME @web_api DECORATOR AND</span>
<span class="gp">... </span><span class="sd">       SIGNATURE</span>
<span class="gp">... </span><span class="sd">       &#39;&#39;&#39;</span>
<span class="gp">... </span>       <span class="k">return</span> <span class="n">MyServerApi</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>     <span class="nd">@classmethod</span>
<span class="gp">... </span>     <span class="k">async</span> <span class="k">def</span> <span class="nf">class_method_api</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">parm1</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="gp">... </span><span class="w">         </span><span class="sd">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="sd">         Concreate class method to be implemented WITH SAME @web_api DECORATION AND,</span>
<span class="gp">... </span><span class="sd">         OF COURSE, SIGNATURE</span>
<span class="gp">... </span><span class="sd">         &#39;&#39;&#39;</span>
<span class="gp">... </span>         <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;param1&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">parm1</span><span class="p">)}</span>
<span class="gp">...</span>
<span class="gp">... </span>     <span class="k">async</span> <span class="k">def</span> <span class="nf">instance_method_api</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncIterator</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="gp">... </span><span class="w">         </span><span class="sd">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="sd">         Concrete instance method that is an Async Iterator over string values.</span>
<span class="gp">... </span><span class="sd">         MUST HAVE SAME @web_api DECORATION AND SIGNATURE</span>
<span class="gp">... </span><span class="sd">         &#39;&#39;&#39;</span>
<span class="gp">... </span>         <span class="c1"># never called since abstract, but needed to tell Python that implementation</span>
<span class="gp">... </span>         <span class="c1"># will be an async generator/iterator:</span>
<span class="gp">... </span>         <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message_bits</span><span class="p">:</span>
<span class="gp">... </span>             <span class="k">yield</span> <span class="n">text</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>One can then declare a Client that acts as a proxy to make calls to the server, thereby keeping the
http protocol details hidden (abstracted away frm the user):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span> <span class="k">def</span> <span class="nf">async_call</span><span class="p">():</span>
<span class="gp">... </span>     <span class="n">client</span> <span class="o">=</span> <span class="n">MyServerApiInterface</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="n">end_point</span><span class="o">=</span><span class="s1">&#39;https://blahblahblah&#39;</span><span class="p">)</span>
<span class="gp">... </span>     <span class="n">instance</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">constructor</span><span class="p">()</span>
<span class="gp">... </span>     <span class="k">async</span> <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="n">instance_method_api</span><span class="p">():</span>
<span class="gp">... </span>         <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>If you do not fallow the recommended practice of the interface have the same name as the concreate class, only with
an “Interface” suffix, you will have to specify <em>impl_name=&lt;name-of-concrete-class&gt;</em> as a parameter to Client class
method above.  The <em>end_point</em> parameter specifies the base url to the server that serves up MyServceApi class.</p>
</section>
</section>
<section id="advanced-discussion-on-parameters">
<h1>Advanced Discussion on Parameters<a class="headerlink" href="#advanced-discussion-on-parameters" title="Permalink to this heading">¶</a></h1>
<section id="optional-parameters">
<h2>Optional Parameters<a class="headerlink" href="#optional-parameters" title="Permalink to this heading">¶</a></h2>
<p>If default parameter values are provided, they are optionally provided on the javascript client-side as well.
Additionally, to refine the second rule of declaring a web API above, the type for a parameter can also be
declared as an Optional to any the types declared there. Provided a default value, include <em>None</em>, is provided.</p>
</section>
<section id="streamed-responses">
<h2>Streamed Responses<a class="headerlink" href="#streamed-responses" title="Permalink to this heading">¶</a></h2>
<p>Responses can be streamed back to the client.  To do so, the underlying Python server call must be written as
an <em>AsyncGenerator</em>, returning a type <em>AsyncGenerator[None, &lt;int, float, bool, str, or bytes&gt;]</em>.   (Thus, ammending
the rule of allowed return values above).  Consider this example of a PoetryReader class:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Example of server code to stream a poem back to the client</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="kn">import</span> <span class="nn">asyncio</span>
 <span class="kn">import</span> <span class="nn">os</span>

 <span class="kn">from</span> <span class="nn">bantam.decorators</span> <span class="kn">import</span> <span class="n">RestMethod</span>
 <span class="kn">from</span> <span class="nn">bantam.web</span> <span class="kn">import</span> <span class="n">WebApplication</span><span class="p">,</span> <span class="n">web_api</span>
 <span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">AsyncGenerator</span>

 <span class="k">class</span> <span class="nc">PoetryReader</span><span class="p">:</span>
     <span class="n">POEM</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">     Mary had a little lamb...</span>
<span class="s2">     Its fleece was white as snow...</span>
<span class="s2">     Everywhere that Mary went...</span>
<span class="s2">     Her lamb was sure to go...</span>
<span class="s2">     &quot;&quot;&quot;</span>

     <span class="nd">@classmethod</span>
     <span class="nd">@web_api</span><span class="p">(</span><span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;text/streamed&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">RestMethod</span><span class="o">.</span><span class="n">POST</span><span class="p">)</span>
     <span class="k">async</span> <span class="k">def</span> <span class="nf">read_poem</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
         <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">PoetryReader</span><span class="o">.</span><span class="n">POEM</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
             <span class="k">yield</span> <span class="n">line</span>
             <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># for dramatic effect</span>
         <span class="k">yield</span> <span class="s2">&quot;THE END&quot;</span>
         <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

 <span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
     <span class="n">app</span> <span class="o">=</span> <span class="n">WebApplication</span><span class="p">(</span><span class="n">static_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="n">js_bundle_name</span><span class="o">=</span><span class="s1">&#39;poetry_reader&#39;</span><span class="p">)</span>
     <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">start</span><span class="p">())</span>  <span class="c1"># default to localhost HTTP on port 8080</span>
</pre></div>
</div>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The method must be declared as POST to work consistently across different machines/web browsers</p>
</div>
<p>The javascript generated for such an API is the same, with the exception that the <em>onsuccess</em> callback will be
named <em>onreceive</em> and will be called with two parameters.  The first is the “chunk” that is read and the second
is a boolean indicating whether it is the final one or not.  The “chunks” are determine by the type yielded by
the generator:</p>
<ul class="simple">
<li><dl class="simple">
<dt>for numeric or <em>bool</em> types: each number yielded will invoke a single callback to <em>onreceive</em>.  But be aware that multiple</dt><dd><p>values can be sent at a time and that the generated javascript code will handle the logic to split them up.
This is particularly true when there is no or short sleep periods between yields.</p>
</dd>
</dl>
</li>
<li><p>for <em>str</em> type: <em>onreceive</em> will be called for each line received, guaranteeing whole lines are provided</p></li>
<li><p>for <em>bytes</em> type: <em>cnreceive</em> will be called for each chunk of bytes received, regardless of size</p></li>
</ul>
<p>Here is a bit of HTML to implement the client-side:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">HTML containing client-side code for handling streaming responses</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span> <span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
 <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
     <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/static/js/poetry_reader.js&quot;</span> <span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
 <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
 <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
 <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#39;poem&#39;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
 <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">     </span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">         </span><span class="kd">let</span><span class="w"> </span><span class="nx">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">bantam</span><span class="p">.</span><span class="nx">__main__</span><span class="p">.</span><span class="nx">PoetryReader</span><span class="p">(</span><span class="s2">&quot;http://localhost:8080&quot;</span><span class="p">);</span>
<span class="w">         </span><span class="kd">let</span><span class="w"> </span><span class="nx">html</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">         </span><span class="kd">let</span><span class="w"> </span><span class="nx">onreceive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">line</span><span class="p">,</span><span class="w"> </span><span class="nx">is_done</span><span class="p">){</span>
<span class="w">              </span><span class="nx">html</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s2">&quot;&lt;p&gt;&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">line</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;&lt;/p&gt;&lt;br/&gt;&quot;</span><span class="p">;</span>
<span class="w">              </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;poem&#39;</span><span class="p">).</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">html</span><span class="p">;</span>
<span class="w">         </span><span class="p">}</span>
<span class="w">         </span><span class="nx">reader</span><span class="p">.</span><span class="nx">read_poem</span><span class="p">(</span><span class="nx">onreceive</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span><span class="w"> </span><span class="nx">reason</span><span class="p">){</span>
<span class="w">             </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;UNEXPECTED ERROR OCCURRED: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">code</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot; : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">reason</span><span class="p">);</span>
<span class="w">         </span><span class="p">});</span>
<span class="w">     </span><span class="p">});</span>
<span class="w"> </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
 <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
 <span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<p>Loading the page <a class="reference external" href="http://localhost:8080/static/index.html">http://localhost:8080/static/index.html</a> will execute the code.</p>
</section>
<section id="streamed-requests">
<h2>Streamed Requests<a class="headerlink" href="#streamed-requests" title="Permalink to this heading">¶</a></h2>
<p>You can also make requests that stream (upload) data to the server.  Here again, we add two more (final) allowable
types for parameters that specify a parameter provides an (async) iterator for lopping over and sending data chunk
by chunk:</p>
<ul class="simple">
<li><p><em>bantam.web.AsyncLineGIterator</em>: specifies that the client will send <em>str</em> data to the server line by line (without
any return character present in the line)</p></li>
<li><p><em>bantam.web.AsyncChunkIterator</em>: specifies that the iterator will send <em>bytes</em> of data to the server</p></li>
</ul>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>At most one parameter may be specified as an iterator type</p>
</div>
<p>Here is what a web API method would look like that captures uploaded byts of data to a file and reports progress
back to the client:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Example code for Python web API method that streams data</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="k">class</span> <span class="nc">Uploader</span><span class="p">:</span>
     <span class="nd">@classmethod</span>
     <span class="nd">@web_api</span><span class="p">(</span><span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;text/html&#39;</span><span class="p">)</span>
     <span class="k">async</span> <span class="k">def</span> <span class="nf">receive_streamed_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">byte_data</span><span class="p">:</span> <span class="n">AsyncChunkGenerator</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>
         <span class="n">bytes_received</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
         <span class="n">packet_size</span> <span class="o">=</span> <span class="mi">100</span> <span class="c1"># bytes</span>
         <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;some_file_path&#39;</span><span class="p">,</span> <span class="s1">&#39;bw&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
             <span class="k">async</span> <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">byte_data</span><span class="p">(</span><span class="n">packet_size</span><span class="p">):</span>
                 <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">byte_data</span><span class="p">)</span>
                 <span class="n">bytes_received</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">byte_data</span><span class="p">)</span>
                 <span class="n">progress</span> <span class="o">=</span> <span class="n">bytes_received</span><span class="o">*</span><span class="mi">100</span><span class="o">/</span><span class="n">size</span>
                 <span class="k">yield</span> <span class="n">progress</span>
</pre></div>
</div>
</div>
<p>As a side note, when a streaming parameter is specified, all others will be sent as query parameters even when the request is
POST.  Note that for chunk iterators, the parameter byte_data will be a callable that takes a single parameter,
which is the max size of packet to be read each chunk.  The line iterator will be a simple iterator, not a callable.
That is for a line itertor the Python code would look like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="k">class</span> <span class="nc">Uploader</span><span class="p">:</span>
    <span class="nd">@classmethod</span>
    <span class="nd">@web_api</span><span class="p">(</span><span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;text/html&#39;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">receive_streamed_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">line_by_line</span><span class="p">:</span> <span class="n">AsyncLineGenerator</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>
        <span class="o">...</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;some_file_path&#39;</span><span class="p">,</span> <span class="s1">&#39;bw&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">async</span> <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">line_by_line</span><span class="p">:</span>  <span class="c1">#&lt;====  NOT a function call as in AsyncChunkIterator</span>
               <span class="o">...</span>
</pre></div>
</div>
<p>On the client side, the signature of the API will look similar, with the <em>onsuccess</em> (<em>onreceive</em> if the
response is also streaming) and <em>onerror</em> callbacks act the same.  The differences are that:</p>
<ol class="arabic simple">
<li><p>the parameter that is the AsyncLine[Chunk]Iterator will not be present in the signature</p></li>
<li><p>insted, the javascript API call will return a function to be called by the client to send each chunk of data (ad
the first and only parameter of the function)</p></li>
</ol>
<p>An example of uploading a file using the above api (assuming the Uploader class belongs to the module <em>uploads</em>):</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">...</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">onreceive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">progress</span><span class="p">,</span><span class="w"> </span><span class="nx">is_done</span><span class="p">){</span>
<span class="w">   </span><span class="p">...</span>
<span class="p">}</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">onerror</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span><span class="w"> </span><span class="nx">reason</span><span class="p">){</span>
<span class="w">   </span><span class="p">...</span>
<span class="p">}</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">uploader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">bantam</span><span class="p">.</span><span class="nx">uploads</span><span class="p">.</span><span class="nx">Uploader</span><span class="p">(</span><span class="nx">site_url</span><span class="p">)</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">size_of_upload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1024</span><span class="o">*</span><span class="mf">1024</span><span class="p">;</span><span class="w">  </span><span class="c1">// bytes</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">send_byte_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">uploader</span><span class="p">.</span><span class="nx">receive_streamed_data</span><span class="p">(</span><span class="nx">onreceive</span><span class="p">,</span><span class="w"> </span><span class="nx">onerror</span><span class="p">,</span><span class="w"> </span><span class="nx">size_of_upload</span><span class="p">)</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FileReader</span><span class="p">();</span>
<span class="nx">reader</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">send_byte_data</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">result</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">reader</span><span class="p">.</span><span class="nx">readAsText</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span><span class="w"> </span><span class="c1">// assumng file is a file object created prior to this code</span>
</pre></div>
</div>
</section>
</section>
<section id="pre-post-processing-request-responses">
<h1>Pre/Post-Processing Request/Responses<a class="headerlink" href="#pre-post-processing-request-responses" title="Permalink to this heading">¶</a></h1>
<p>You can pre-process requests before a call is made to the underlying Python web API. Likewise, you can modify
responses returned from a Python web API call before it is sent to the client.  There are two means to do so.
One is at the application level, by calling <em>set_preprocessor</em> and <em>set_postprocessor</em> accordingly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">preprocessor</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
   <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;additional_arg&#39;</span><span class="p">:</span> <span class="s2">&quot;value&quot;</span><span class="p">}</span>  <span class="c1"># adds an additional argument to the web API call; can also return None</span>

<span class="k">def</span> <span class="nf">postprocessor</span><span class="p">(</span><span class="n">response</span><span class="p">:</span> <span class="n">Response</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
   <span class="n">response</span><span class="o">.</span><span class="n">body</span> <span class="o">+=</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> Additional line of output&quot;</span>

<span class="o">...</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">WebApplication</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">set_preprocessing</span><span class="p">(</span><span class="n">preprocessor</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">set_postprocessing</span><span class="p">(</span><span class="n">postprocessor</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, you can do this for each individual web API method through optional <em>preprocess</em> and <em>postprocess</em>
arguments.  Using the above define <em>prerprocessor</em> and <em>postprocessor</em> functions, this would look like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="nd">@web_api</span><span class="p">(</span><span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;text/plain&#39;</span><span class="p">,</span> <span class="n">preprocess</span><span class="o">=</span><span class="n">preprocessor</span><span class="p">,</span> <span class="n">postprocess</span><span class="o">=</span><span class="n">postprocessor</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="getting-request-context">
<h1>Getting Request Context<a class="headerlink" href="#getting-request-context" title="Permalink to this heading">¶</a></h1>
<p>In the implementation of a web api, you can get the context of the rquest (i.e., the request headers).  Such
information may be useful if chaining one Rest call to other backend Rest calls in a service hiearchy, and passing
any contextual information around the originating request down through such a chain of calls.  Context is available
through the <em>WebApplication.get_context()</em> call which returns a dictionary of the reques header keys and values.</p>
<p>Be aware that accessing context may limit the use of your code as a “library-as-a-service”.  If a direct call is made
to a web api without any request, the <em>get_context()</em> call will return None, a case you should consider handling.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">bantam</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, John Rusnak.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>